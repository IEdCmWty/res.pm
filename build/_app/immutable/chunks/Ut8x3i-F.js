import{p as $,h as Q,F as Z,G as J,H as V,au as tt,av as et,c as nt,s as W,aw as C,o as D,ao as N,W as rt,d as at}from"./CbVtA98w.js";import"./D0HpNlzU.js";import"./DLtVLP0p.js";import{s as st,b}from"./BzfGsWPA.js";import{g as ot}from"./DZ4Fult6.js";function Mt(t,n,[e,r]=[0,0]){$&&e===0&&Q();var i=t,s=null,o=null,c=rt,a=e>0?J:0,u=!1;const g=(f,p=!0)=>{u=!0,l(p,f)},l=(f,p)=>{if(c===(c=f))return;let v=!1;if($&&r!==-1){if(e===0){const h=i.data;h===V?r=0:h===tt?r=1/0:(r=parseInt(h.substring(1)),r!==r&&(r=c?1/0:-1))}const d=r>e;!!c===d&&(i=et(),nt(i),W(!1),v=!0,r=-1)}c?(s?C(s):p&&(s=D(()=>p(i))),o&&N(o,()=>{o=null})):(o?C(o):p&&(o=D(()=>p(i,[e+1,r]))),s&&N(s,()=>{s=null})),v&&W(!0)};Z(()=>{u=!1,n(g),u||l(null,null)},a),$&&(i=at)}let P;const U="en",H=["en"];let L=()=>U;const it=t=>{typeof t=="function"?L=k(t):L=k(()=>t),P!==void 0&&P(L())};function k(t){return()=>{const n=t();if(!Y(n))throw new Error("languageTag() didn't return a valid language tag. Check your setLanguageTag call");return n}}const ct=t=>{P=t};function Y(t){return H.includes(t)}const ut=Object.freeze(Object.defineProperty({__proto__:null,availableLanguageTags:H,isAvailableLanguageTag:Y,get languageTag(){return L},onSetLanguageTag:ct,setLanguageTag:it,sourceLanguageTag:U},Symbol.toStringTag,{value:"Module"})),lt=()=>{const t=st;return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},updated:t.updated}},ft={subscribe(t){return lt().page.subscribe(t)}};function gt(t,n){if(t==="")return"";const e=new URL(t,n).pathname;return e.endsWith("/")?e.slice(0,-1):e}function S(t,n){const e=mt(t),r=ht(e,n),[i,s]=pt(r);return[i,s]}const F=(t,n,e)=>[n,t,e??""].filter(r=>r!=="/").join("")||"/";function ht(t,n){const e=t.replace(n,"");return e.startsWith("/")?e:`/${e}`}function pt(t){const e=["/.html__data.json","/__data.json"].find(r=>t.endsWith(r));return e?[t.slice(0,-e.length)||"/",e]:[t,void 0]}function mt(t){try{return decodeURI(t)}catch{return t}}const dt=t=>({url:n})=>{try{const[e,r]=S(n.pathname,b),i=t.getLanguageFromLocalisedPath(e);if(!i)return n.pathname;const s=t.getCanonicalPath(e,i);return F(s,b,r)}catch{return n.pathname}};function _t(t){return`/${t.split("/").filter(Boolean).join("/")}`}function vt(t){const n=t.map(e=>typeof e=="string"?r=>r===e:r=>e.test(r));return e=>n.some(r=>r(_t(e)))}const w="rtl",E="ltr";function Tt(t){try{const n=new Intl.Locale(t);return"textInfo"in n?n.textInfo.direction===w?w:E:n.getTextInfo().direction===w?w:E}catch{return E}}function bt(t){const n=t.map(e=>[e,Tt(e)]);return Object.fromEntries(n)}const wt=0,z=1,I=2,Lt=4,_=0,T=1,y=2;function St(t){const n=It(xt);return t.sort((e,r)=>{var i,s,o,c,a,u;const g=M(e).map(n),l=M(r).map(n);for(let f=0;f<Math.max(g.length,l.length);f+=1){const p=g[f],v=l[f];if(!p)return-1;if(!v)return 1;for(let d=0;d<Math.max(p.length,v.length);d+=1){const h=p[d],m=v[d];if((h==null?void 0:h[_])||(m==null?void 0:m[_])){if(!h)return-1;if(!m)return 1;const x=((i=p[d+1])==null?void 0:i[T])||((o=(s=g[f+1])==null?void 0:s[0])==null?void 0:o[T]),R=((c=v[d+1])==null?void 0:c[T])||((u=(a=l[f+1])==null?void 0:a[0])==null?void 0:u[T]),G=x&&R,A=x&&!R,B=!x&&R;if((h[_]&&m[_])===I){if(G)continue;if(A)return-1;if(B)return 1}if(h[_]===I)return A?-1:1;if(m[_]===I)return B?1:-1;if(h[y]!==m[y])return(-1)**+h[y];if(h[_]!==m[_])return(-1)**+(h[_]>m[_])}else if((h==null?void 0:h[T])!==(m==null?void 0:m[T]))return Rt(h[T],m[T])}}return e<r?1:-1})}function It(t){const n=new Map;return e=>(n.has(e)||n.set(e,t(e)),n.get(e))}function xt(t){const n=[];let e=0;for(;e<=t.length;){const r=t.indexOf("[",e),i=r===-1;if(n.push([wt,t.slice(e,i?void 0:r),!1]),i)break;const s=t[r+1]==="["?z:t[r+1]==="."?I:Lt,o=s===z?"]]":"]",c=t.indexOf(o,r);if(c===-1)throw new Error(`Invalid route definition ${t}`);const a=t.slice(r,e=c+o.length);n.push([s,a,a.includes("=")])}return n}const M=t=>t.replace(/\[\[[^\]]+\]\](?!$)/g,"").split("/").filter(Boolean);function Rt(t,n){if(t===n)return 0;let e=0;for(;t[e]===n[e];)e++;return t[e]?n[e]?t[e]<n[e]?-1:1:-1:1}const $t=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function Et(t){const n=[];return{pattern:t==="/"?/^\/$/:new RegExp(`^${q(t).map(r=>{const i=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(r);if(i)return n.push({name:i[1],matcher:i[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const s=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(r);if(s)return n.push({name:s[1],matcher:s[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!r)return;const o=r.split(/\[(.+?)\](?!\])/);return"/"+o.map((a,u)=>{if(u%2){if(a.startsWith("x+"))return j(String.fromCharCode(parseInt(a.slice(2),16)));if(a.startsWith("u+"))return j(String.fromCharCode(...a.slice(2).split("-").map(d=>parseInt(d,16))));const g=$t.exec(a);if(!g)throw new Error(`Invalid param: ${a}`);const[,l,f,p,v]=g;return n.push({name:p,matcher:v,optional:!!l,rest:!!f,chained:f?u===1&&o[0]==="":!1}),f?"(.*?)":l?"([^/]*)?":"([^/]+?)"}return j(a)}).join("")}).join("")}/?$`),params:n}}function yt(t,n,e){const r={},i=t.slice(1),s=i.filter(c=>c!==void 0);let o=0;for(const[c,a]of n.entries()){let u=i[c-o];if(a.chained&&a.rest&&o&&(u=i.slice(c-o,c+1).filter(l=>l).join("/"),o=0),u===void 0){a.rest&&(r[a.name]="");continue}if(a.matcher&&!e[a.matcher])return;if((e[a.matcher]??(()=>!0))(u)){r[a.name]=u;const l=n[c+1],f=i[c+1];l&&!l.rest&&l.optional&&f&&a.chained&&(o=0),!l&&!f&&Object.keys(r).length===s.length&&(o=0);continue}if(a.optional&&a.chained){o++;continue}return}if(!o)return r}function j(t){return t.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}const jt=/\[(\[)?(\.\.\.)?(\w+?)(?:=(\w+))?\]\]?/g;function K(t,n){return"/"+q(t).map(e=>e.replace(jt,(r,i,s,o)=>{const c=n[o];if(!c){if(i||s&&c!==void 0)return"";throw new Error(`Missing parameter '${o}' in route ${t}`)}if(c[0]=="/"||c.endsWith("/"))throw new Error(`Parameter '${o}' in route ${t} cannot start or end with a slash`);return c})).filter(Boolean).join("/")}function X(t,n,e){const r=St(n);for(const i of r){const s=Et(i),o=s.pattern.exec(Ot(t));if(!o)continue;const c=yt(o,s.params,e);if(c)return{params:c,id:i}}}const Ot=t=>t.endsWith("/")?t.slice(0,-1):t,q=t=>t.slice(1).split("/");function Pt(t,n,e,r,i){function s(a){const g=a.split("/")[1];if(t.includes(g)&&(i==="always"||g!==n))return g;if(i==="never")return n}function o(a,u){const g=a.endsWith("/")&&a!=="/";a=g?a.slice(0,-1):a;let l=At(a,u,e,r);return g&&(l+="/"),(i==="always"||u!==n)&&(l=`/${u}${l}`),l}function c(a,u){const g=a.endsWith("/")&&a!=="/";(i==="always"||u!==n)&&(a=a.replace(`/${u}`,"")||"/");const l=g;a=l?a.slice(0,-1):a;let f=Ft(a,u,e,r);return l&&(f+="/"),f}return{getLanguageFromLocalisedPath:s,getLocalisedPath:o,getCanonicalPath:c}}function Ft(t,n,e,r){for(const[i,s]of Object.entries(e)){if(!(n in s))continue;const o=s[n];if(!o)continue;const c=X(t,[o],r);if(c)return K(i,c.params)}return t}function At(t,n,e,r){const i=X(t,Object.keys(e),r);if(!i)return t;const s=e[i.id];if(!s)return t;const o=s[n];return o?K(o,i.params):t}function Bt(t,n){const e={},r=[],i=t.sourceLanguageTag,s={defaultLanguageTag:i,runtime:t,translations:e,matchers:{},exclude:vt(r),prefixDefaultLanguage:"never",textDirection:bt(t.availableLanguageTags),seo:{noAlternateLinks:!1}},o=Pt(t.availableLanguageTags,i,s.translations,s.matchers,s.prefixDefaultLanguage);return Object.freeze(e),Object.freeze(s),{config:s,strategy:o,reroute:()=>dt(o),handle:()=>{throw new Error("")},getLanguageFromUrl(c){const a=O(b),[u]=S(c.pathname,a);return s.exclude(u)?s.defaultLanguageTag:o.getLanguageFromLocalisedPath(u)||s.defaultLanguageTag},resolveRoute(c,a=void 0){if(s.exclude(c))return c;const u=O(b),[g,l]=S(c,u);if(a=a??t.languageTag(),!c.startsWith(u))return c;const f=o.getLocalisedPath(g,a);return F(f,u,l)},route(c){const a=O(b),[u,g]=S(c,a),f=o.getLanguageFromLocalisedPath(u)||s.defaultLanguageTag,p=o.getCanonicalPath(u,f);return F(p,a,g)}}}function O(t){return t===""?"":t.startsWith("/")?t:gt(t,new URL(ot(ft).url))}const Ut=Bt(ut);export{Mt as a,ft as b,Ut as i,gt as n,S as p,F as s};
